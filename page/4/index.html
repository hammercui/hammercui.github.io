<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="hammer崔的程序世界" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="hammer崔的程序世界">
<meta property="og:url" content="http://hammercui.github.io/page/4/index.html">
<meta property="og:site_name" content="hammer崔的程序世界">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hammer崔的程序世界">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6263296159406622000,
      author: '博主大人'
    }
  };
</script>




  <link rel="canonical" href="http://hammercui.github.io/page/4/"/>

  <title> hammer崔的程序世界 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?4c0e7eb512fab8f2d1682c1bff044651";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">hammer崔的程序世界</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">我的生涯一片无悔，我想起那个午夜在灯泡下的抠代码，那是我逝去的青春！</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/react-native基础：组件生命周期/" itemprop="url">
                  react-native基础：组件生命周期
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-30T15:13:04+08:00" content="2016-03-30">
              2016-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react-native-basis/" itemprop="url" rel="index">
                    <span itemprop="name">react-native basis</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/react-native基础：组件生命周期/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/react-native基础：组件生命周期/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><a href="http://fraserxu.me/2014/08/31/react-component-lifecycle/" target="_blank" rel="external">React入门教程 - 组件生命周期</a></p>
<ul>
<li><code>componentWillMount（）</code>：<strong>组件加载</strong>。</li>
</ul>
<p><code>componentWillMount</code>会在组件<code>render()</code>之前执行，永远只执行一次。类似于Android的<code>onCreat</code></p>
<ul>
<li><code>componentDidMount()</code>:<strong>组件加载</strong>。</li>
</ul>
<p>这个方法在组件加载之后执行，这时组件已经生成了对应的DOM结构，可以通过<code>geDOMNode()</code>来进行访问。如果你想和其他JavaScript框架一起使用，可以在这个方法中执行setTimeout, setInterval或者发送AJAX请求等操作(防止异部操作阻塞UI)。</p>
<ul>
<li><code>componentWillReceiveProps（object nextProps）</code>：<strong>组件更新</strong>。</li>
</ul>
<p>这个方法在初始化render时不会被调用。旧的props可以通过this.props来获取。在这个函数内调用this.setState()方法不会增加一次新的render.</p>
<ul>
<li><code>boolean shouldComponentUpdate(object nextProps, object nextState)</code>：<strong>组件更新</strong>。</li>
</ul>
<p>返回一个布尔值。在组件接收到新的props或者state时被执行。在初始化时或者使用<code>forceUpdate</code>时不被执行。可以在你确认不需要更新组件时使用。</p>
<ul>
<li><code>componentWillUpdate(object nextProps, object nextState)</code>:<strong>组件更新</strong>.</li>
</ul>
<p>在组件接收到新的props或者state但还没有render时被执行。在初始化时不会被执行。</p>
<p>一般用在组件发生更新之前。</p>
<ul>
<li><code>componentDidUpdate(object prevProps, object prevState)</code>:<strong>组件更新</strong>.</li>
</ul>
<p>在组件完成更新后立即执行。在初始化时不会被执行。一般会在组件完成更新后被使用。例如清除notification文字等操作。</p>
<ul>
<li><code>componentWillUnmount()</code>:<strong>组件Unmounting</strong>.</li>
</ul>
<p>在组件从DOM unmount后立即执行.主要用来执行一些必要的清理任务。例如清除setTimeout等函数，或者任意的在componentDidMount创建的DOM元素。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/react基础：react-web项目选择ui/" itemprop="url">
                  react基础：react-web项目ui的选择
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-27T16:43:06+08:00" content="2016-03-27">
              2016-03-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/react基础：react-web项目选择ui/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/react基础：react-web项目选择ui/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="app项目选择material-ui"><a href="#app项目选择material-ui" class="headerlink" title="app项目选择material-ui"></a>app项目选择<a href="https://github.com/callemall/material-ui/blob/master/ROADMAP.md" target="_blank" rel="external">material-ui</a></h1><blockquote>
<p>目前我正在使用的ui框架，google material design的设计语言。github的stars有14839个，很值得信赖</p>
</blockquote>
<p>官网地址：<a href="http://www.material-ui.com/v0.15.0-alpha.1/#/customization/themes" target="_blank" rel="external">http://www.material-ui.com/v0.15.0-alpha.1/#/customization/themes</a></p>
<h1 id="web项目的选择ant-design"><a href="#web项目的选择ant-design" class="headerlink" title="web项目的选择ant.design"></a>web项目的选择<a href="http://ant.design/" target="_blank" rel="external">ant.design</a></h1><blockquote>
<p>淘宝的前端团队折腾出来的产品，评价不错，还未使用。</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/react基础：react-webpack快速搭建/" itemprop="url">
                  react基础：react0.14.7+webpack快速搭建web项目
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-26T18:26:56+08:00" content="2016-03-26">
              2016-03-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/react基础：react-webpack快速搭建/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/react基础：react-webpack快速搭建/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="方法1-一一安装"><a href="#方法1-一一安装" class="headerlink" title="方法1 一一安装"></a>方法1 一一安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install react react-dom babel-preset-react --save-dev</span><br><span class="line">npm install babel-preset-es2015 --save-dev</span><br><span class="line">npm install webpack --save-dev</span><br><span class="line">npm install webpack-dev-server --save-dev</span><br><span class="line">npm install babel-core --save-dev</span><br><span class="line">npm install babel-loader --save-dev</span><br></pre></td></tr></table></figure>
<h2 id="方法2-批量安装"><a href="#方法2-批量安装" class="headerlink" title="方法2 批量安装"></a>方法2 批量安装</h2><p>package.json添加如下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> &quot;dependencies&quot;: &#123;</span><br><span class="line">   &quot;babel-runtime&quot;: &quot;^6.5.0&quot;,</span><br><span class="line">   &quot;react&quot;: &quot;^0.14.7&quot;,</span><br><span class="line">   &quot;react-dom&quot;: &quot;^0.14.7&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &quot;devDependencies&quot;: &#123;</span><br><span class="line">&quot;amazeui-react&quot;: &quot;^1.0.1&quot;,</span><br><span class="line">   &quot;babel-core&quot;: &quot;^6.7.4&quot;,</span><br><span class="line">   &quot;babel-loader&quot;: &quot;^6.2.4&quot;,</span><br><span class="line">   &quot;babel-preset-es2015&quot;: &quot;^6.6.0&quot;,</span><br><span class="line">   &quot;babel-preset-react&quot;: &quot;^6.5.0&quot;,</span><br><span class="line">   &quot;css-loader&quot;: &quot;^0.23.1&quot;,</span><br><span class="line">   &quot;material-ui&quot;: &quot;^0.15.0-alpha.2&quot;,</span><br><span class="line">   &quot;react&quot;: &quot;^0.14.7&quot;,</span><br><span class="line">   &quot;react-dom&quot;: &quot;^0.14.7&quot;,</span><br><span class="line">   &quot;react-hot-loader&quot;: &quot;^1.3.0&quot;,</span><br><span class="line">   &quot;react-tap-event-plugin&quot;: &quot;^0.2.2&quot;,</span><br><span class="line">   &quot;style-loader&quot;: &quot;^0.13.1&quot;,</span><br><span class="line">   &quot;url-loader&quot;: &quot;^0.5.7&quot;,</span><br><span class="line">   &quot;webpack&quot;: &quot;^1.12.14&quot;,</span><br><span class="line">   &quot;webpack-dev-server&quot;: &quot;^1.14.1&quot;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>然后执行<code>npn install</code></p>
<h1 id="配置webpack"><a href="#配置webpack" class="headerlink" title="配置webpack"></a>配置webpack</h1><p>工程截图<br><img src="http://7xrf0l.com1.z0.glb.clouddn.com/16-3-26/29969857.jpg" alt=""><br>在工程目录下新建<code>webpack.config.js</code>文件，内容如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Created by hammer on 2016/3/26.</span><br><span class="line"> * 配置的打包文件</span><br><span class="line"> */</span><br><span class="line">var webpack = require(&apos;webpack&apos;);</span><br><span class="line">//var commonsPlugin = new webpack.optimize.CommonsChunkPlugin(&apos;common.js&apos;);</span><br><span class="line">var path = require(&apos;path&apos;);</span><br><span class="line">console.log(__dirname);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    //插件项</span><br><span class="line">    plugins: [</span><br><span class="line">		//commonsPlugin,</span><br><span class="line">		new webpack.NoErrorsPlugin()</span><br><span class="line">	1],</span><br><span class="line">    //页面入口文件配置</span><br><span class="line">    //entry: &#123;mian : &apos;./app/main.js&apos;&#125;,</span><br><span class="line">    entry:path.resolve(__dirname,&apos;./app/main.js&apos;),</span><br><span class="line">    //入口文件输出配置</span><br><span class="line">    //output: &#123;path: __dirname+&apos;_build_&apos;, filename: &apos;[name].js&apos;&#125;</span><br><span class="line">    output:&#123;</span><br><span class="line">        path: path.resolve(__dirname,&apos;./build&apos;),</span><br><span class="line">        filename: &apos;build.js&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        //加载器配置</span><br><span class="line">        loaders: [</span><br><span class="line">            //LESS文件先通过less-load处理成css，然后再通过css-loader加载成css模块，最后由style-loader加载器对其做最后的处理，</span><br><span class="line">            // 从而运行时可以通过style标签将其应用到最终的浏览器环境</span><br><span class="line">            &#123;test: /\.less/, loader: &apos;style-loader!css-loader!less-loader&apos;&#125;,</span><br><span class="line">            //.css 文件使用 style-loader 和 css-loader 来处理</span><br><span class="line">            &#123; test: /\.css$/, loader: &apos;style-loader!css-loader&apos; &#125;,</span><br><span class="line">            //.js 文件使用 jsx-loader 来编译处理 jsx-loader可以添加?harmony参数使其支持ES6语法</span><br><span class="line">            &#123; test: /\.js$/,</span><br><span class="line">                exclude: /node_modules/,</span><br><span class="line">                loader: &apos;babel&apos;,</span><br><span class="line">                query:&#123;</span><br><span class="line">                    presets:[&apos;es2015&apos;,&apos;react&apos;]</span><br><span class="line">                &#125; //备注：es2015用于支持ES6语法，react用于解决render()报错的问题</span><br><span class="line">            &#125;,</span><br><span class="line">            //.scss 文件使用 style-loader、css-loader 和 sass-loader 来编译处理</span><br><span class="line">            &#123; test: /\.scss$/, loader: &apos;style!css!sass?sourceMap&apos;&#125;,</span><br><span class="line">            //图片文件使用 url-loader 来处理，小于8kb的直接转为base64</span><br><span class="line">            &#123; test: /\.(png|jpg)$/, loader: &apos;url-loader?limit=8192&apos;&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    //其它解决方案配置</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        //查找module的话从这里开始查找</span><br><span class="line">        //root: &apos;E:/github/flux-example/app&apos;, //绝对路径</span><br><span class="line">        //自动扩展文件后缀名，意味着我们require模块可以省略不写后缀名</span><br><span class="line">        extensions: [&apos;&apos;, &apos;.js&apos;, &apos;.json&apos;, &apos;.scss&apos;],</span><br><span class="line">        //模块别名定义，方便后续直接引用别名，无须多写长长的地址</span><br><span class="line">        alias: &#123;</span><br><span class="line">            AppStore : &apos;js/stores/AppStores.js&apos;,</span><br><span class="line">            ActionType : &apos;js/actions/ActionType.js&apos;,</span><br><span class="line">            AppAction : &apos;js/actions/AppAction.js&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>执行<code>webpack</code>命令进行打包，打包完成就会在build目录出现build.js文件，编译成功。</p>
<h1 id="编译并启动"><a href="#编译并启动" class="headerlink" title="编译并启动"></a>编译并启动</h1><p>修改<code>package.json</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;build&quot;: &quot;webpack&quot;,</span><br><span class="line">	&quot;dev&quot;: &quot;webpack-dev-server --devtool eval --progress --colors --hot --content-base build&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>index.html文件如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;content&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;build.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>可修改服务的端口号<code>webpac.config.js</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">       inline: true,</span><br><span class="line">       port: 7777</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure></p>
<p>运行<code>npm run dev</code><br>在浏览器打开<a href="http://localhost:7777预览" target="_blank" rel="external">http://localhost:7777预览</a></p>
<h1 id="启用webpack-dev-server进行动态开发"><a href="#启用webpack-dev-server进行动态开发" class="headerlink" title="启用webpack-dev-server进行动态开发"></a>启用webpack-dev-server进行动态开发</h1><p>1 在配置中增加一个入口点,修改<code>webpack.config.js</code>文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">entry:[</span><br><span class="line">        &apos;webpack/hot/dev-server&apos;,</span><br><span class="line">        path.resolve(__dirname,&apos;app/main.js&apos;)</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure></p>
<p>2 修改inedx.html文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id = &quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;http://localhost:7777/webpack-dev-server.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;build.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这样可以通过</p>
<p>运行<code>npm run dev</code>进入开发模式，可以快速编辑直接预览</p>
<h1 id="优化重合并"><a href="#优化重合并" class="headerlink" title="优化重合并"></a>优化重合并</h1><p>你可能注意到在引入 React JS 到你的项目之后，给你的应用重新合并会花费太多的时间。在开发环境中，最理想的是编译最多 200 到 800 毫秒的速度，取决于你在开发的应用。<br>在开发环境中使用压缩文件<br>为了不让 Webpack 去遍历 React JS 及其依赖，你可以在开发中重写它的行为。<br>修改<code>webpack.config.js</code>文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var path = require(&apos;path&apos;);</span><br><span class="line">+ var node_modules = path.resolve(__dirname, &apos;node_modules&apos;);</span><br><span class="line">+ var pathToReact = path.resolve(node_modules, &apos;react/dist/react.min.js&apos;);</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    entry: [&apos;webpack/hot/dev-server&apos;, path.resolve(__dirname, &apos;app/main.js&apos;)],</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        alias: &#123;</span><br><span class="line">         + &apos;react&apos;: pathToReact</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, &apos;build&apos;),</span><br><span class="line">        filename: &apos;bundle.js&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        loaders: [&#123;</span><br><span class="line">            test: /\.jsx?$/,</span><br><span class="line">            loader: &apos;babel&apos;</span><br><span class="line">        &#125;],</span><br><span class="line">        noParse: [pathToReact]</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports = config;</span><br></pre></td></tr></table></figure></p>
<h1 id="出现的问题"><a href="#出现的问题" class="headerlink" title="出现的问题"></a>出现的问题</h1><h2 id="1-Uncaught-ReferenceError-webpackJsonp-is-not-defined"><a href="#1-Uncaught-ReferenceError-webpackJsonp-is-not-defined" class="headerlink" title="1 Uncaught ReferenceError: webpackJsonp is not defined"></a>1 Uncaught ReferenceError: webpackJsonp is not defined</h2><p>使用CommonsChunkPlugin生成了公共文件，但是未使用<br>添加</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p><a href="https://segmentfault.com/a/1190000003768578" target="_blank" rel="external">初学webpack与react</a>,这个是我认为最好的教程。</p>
<p><a href="https://segmentfault.com/a/1190000002767365#articleHeader7" target="_blank" rel="external">轻松入门React和Webpack</a></p>
<p><a href="http://www.w2bc.com/Article/50764" target="_blank" rel="external">一小时包教会 —— webpack 入门指南</a></p>
<p><a href="http://www.zplan.net/news.php?id=287" target="_blank" rel="external">react新版本与babel新版本的兼容问题:Module build failed: SyntaxError:React.render(<br>Hello</a><br><a href="http://www.jianshu.com/p/418e48e0cef1" target="_blank" rel="external">React+Webpack快速上手指南</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/react基础：npm如何使用淘宝镜像/" itemprop="url">
                  react基础：npm如何使用淘宝镜像
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-26T11:12:43+08:00" content="2016-03-26">
              2016-03-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/react基础：npm如何使用淘宝镜像/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/react基础：npm如何使用淘宝镜像/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>对于不能翻墙的同学，npm加载会变得相当难受，可以采用<a href="http://npm.taobao.org/" target="_blank" rel="external">淘宝的npm镜像</a>进行加速。</p>
</blockquote>
<h1 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h1><h2 id="临时使用"><a href="#临时使用" class="headerlink" title="临时使用"></a>临时使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm --registry https://registry.npm.taobao.org install express</span><br></pre></td></tr></table></figure>
<h2 id="持久使用"><a href="#持久使用" class="headerlink" title="持久使用"></a>持久使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">// 配置后可通过下面方式来验证是否成功</span><br><span class="line">npm config get registry</span><br><span class="line">// 或</span><br><span class="line">npm info express</span><br></pre></td></tr></table></figure>
<h2 id="通过cnpm使用"><a href="#通过cnpm使用" class="headerlink" title="通过cnpm使用"></a>通过cnpm使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">// 使用</span><br><span class="line">cnpm install express</span><br></pre></td></tr></table></figure>
<p>以后需要通过npm安装的，使用cnpm安装就行</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/ES6学习：常用操作函数/" itemprop="url">
                  ES6学习：常用操作函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-24T15:39:25+08:00" content="2016-03-24">
              2016-03-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ES6/" itemprop="url" rel="index">
                    <span itemprop="name">ES6</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/ES6学习：常用操作函数/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/ES6学习：常用操作函数/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li>ReactNative中文社区的<a href="http://bbs.reactnative.cn/topic/15/react-react-native-%E7%9A%84es5-es6%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8" target="_blank" rel="external">React/React Native 的ES5 ES6写法对照表</a></li>
<li><a href="https://segmentfault.com/a/1190000003857670?_ea=396445" target="_blank" rel="external">拥抱ES6之数组扩展</a></li>
<li><a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">阮一峰的es6入门</a></li>
</ul>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><p>数组，常用map进行遍历</p>
<p>新建</p>
<p><code>var array = new Array();</code></p>
<p>或者</p>
<p><code>var array = [&quot;1111&quot;,&quot;22222&quot;]</code></p>
<ul>
<li><code>array.lenght</code>:数组长度</li>
<li><code>array.isArray</code>:判断一个对象是否是数组</li>
</ul>
<p><strong><code>Array.from</code></strong> </p>
<p>这个方法作用是将一个 ArrayLike 对象或者 Iterable 对象转换成一个 Array ，本文只讨论 ArrayLike 对象相关内容。<br>比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//把一个字符串转换成数组对象</span><br><span class="line">var Array.from(“qwert”)</span><br><span class="line">//[&quot;q&quot;,&quot;w&quot;,&quot;e&quot;,&quot;r&quot;,&quot;t&quot;]</span><br></pre></td></tr></table></figure>
<p><strong><code>Array.map</code></strong></p>
<p>用来将数组转换为另外一个数组</p>
<p>基本用法跟forEach方法类似：</p>
<p><code>array.map(callback,[ thisObject]);</code></p>
<p>callback的参数也类似：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[].map(function(value, index, array) &#123;</span><br><span class="line">    // ...</span><br><span class="line">    return Object</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>但是map更多的是用来返回对象<br><code>callback</code>需要有return值,return值就相当于foreach运算之后的返回值。所以常用于循环遍历数组，返回<view>对象，也就是react的render方法里，比如以下代码用法：</view></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var array = [&quot;我&quot;,&quot;你&quot;]</span><br><span class="line">render()&#123;</span><br><span class="line">return(</span><br><span class="line">	array.map((str,index)==&gt;&#123;</span><br><span class="line">		&lt;View&gt;&#123;str&#125;&lt;/View&gt;</span><br><span class="line">	&#125;)</span><br><span class="line">)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>Array.concat()</code></strong></p>
<p>方法用于连接两个或多个数组。该方法不会改变现有的数组，而仅仅会返回被连接数组的一个副本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = Array.of(1, 2, 3);</span><br><span class="line">var resArr = arr.concat(4);</span><br><span class="line">arr // [ 1, 2, 3 ]</span><br><span class="line">resArr // [ 1, 2, 3, 4 ]</span><br></pre></td></tr></table></figure>
<p><strong><code>Array.join()</code></strong></p>
<p>方法用于把数组中的所有元素放入一个字符串。元素是通过指定的分隔符进行分隔的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = Array.of(1, 2, 3);</span><br><span class="line">var resStr = arr.join(&quot;,&quot;);</span><br><span class="line">arr // [ 1, 2, 3 ]</span><br><span class="line">resStr // 1,2,3</span><br></pre></td></tr></table></figure>
<p><strong>Array.pop()</strong></p>
<p>方法用于删除并返回数组的最后一个元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = Array.of(1, 2, 3);</span><br><span class="line">var resEle = arr.pop();</span><br><span class="line">arr // [ 1, 2 ]</span><br><span class="line">resEle // 3</span><br></pre></td></tr></table></figure>
<p><strong><code>Array.push()</code></strong></p>
<p>方法可向数组的末尾添加一个或多个元素，并返回新的长度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = Array.of(1, 2, 3);</span><br><span class="line">var resLen = arr.push(&apos;a&apos;);</span><br><span class="line">arr // [ 1, 2, 3, &apos;a&apos; ]</span><br><span class="line">resLen // 4</span><br></pre></td></tr></table></figure>
<p><strong><code>Array.sort()</code></strong></p>
<p>方法用于对数组的元素进行排序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//按照整数数值比较</span><br><span class="line">var arr = Array.of(3, 11, 8);</span><br><span class="line">var res = arr.sort((a, b) =&gt; a - b);</span><br><span class="line">arr // [ 11, 3, 8 ]</span><br><span class="line">res // [ 3, 8, 11 ]</span><br></pre></td></tr></table></figure>
<p><strong><code>Array.fliter()</code></strong></p>
<p>使用指定的函数测试所有元素，并返回一个包含所有测试通过的元素的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var new_arrary = arr.filter(callback[, thisArg])</span><br></pre></td></tr></table></figure>
<p>callback函数：<br>用来测试数组每个元素的函数，参数是（element，index，array），返回true表示用过测试，保留，false表示不保留</p>
<p>thisArg：<br>可选。执行 callback 时的用于 this 的值。</p>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>Promise</p>
<p>1 简单说就是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果.</p>
<p>2 语法上，promise是一个对象，可以获取异步操作的消息。有三种状态：Pending(进行总)，Resolved（已完成），Rejected（已失败）.<br>3 Promise构造函数接受一个函数作为参数。该函数的两个参数是resolve方法和reject方法。</p>
<h2 id="Sync"><a href="#Sync" class="headerlink" title="Sync"></a>Sync</h2><p>es7新增特性，结合或者Promise使用，表达一个异步操作，内部函数体内。<code>awite function()</code>操作为要等待的操作，类似于c#的yield，之后的awite操作执行完毕，后面的代码段才执行</p>
<p>## </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/react-native-android实战：listView构建信息流/" itemprop="url">
                  react-native android实战：5 ListView构建信息流
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-24T15:00:34+08:00" content="2016-03-24">
              2016-03-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react-native-android实战/" itemprop="url" rel="index">
                    <span itemprop="name">react-native android实战</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/react-native-android实战：listView构建信息流/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/react-native-android实战：listView构建信息流/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="需要掌握的基础语法"><a href="#需要掌握的基础语法" class="headerlink" title="需要掌握的基础语法"></a>需要掌握的基础语法</h2><ul>
<li>1 使用 fetch</li>
</ul>
<p>fetch是一个更好的网络API，它由标准委员会提出，并已经在Chrome中实现。它在React Native中也默认可以使用。</p>
<ul>
<li>2 使用promise</li>
</ul>
<h1 id="ScrollView的使用"><a href="#ScrollView的使用" class="headerlink" title="ScrollView的使用"></a>ScrollView的使用</h1><h1 id="ListView使用"><a href="#ListView使用" class="headerlink" title="ListView使用"></a>ListView使用</h1>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/android基础：applicationId与packageName的区别/" itemprop="url">
                  android基础：applicationId与packageName的区别
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-23T15:41:11+08:00" content="2016-03-23">
              2016-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/android基础：applicationId与packageName的区别/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/android基础：applicationId与packageName的区别/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><code>applicationId</code>：在Android系统中应用的<code>applicationId</code>作为应用的唯一标识，就像人的身份证号一样，在一个Android设备中所有的应用程序的<code>applicationId</code>都是唯一的。</p>
</blockquote>
<h1 id="eclipse版本"><a href="#eclipse版本" class="headerlink" title="eclipse版本"></a>eclipse版本</h1><p><code>package name</code>：在用Eclipse构建的Android项目中，使用包名(Package Name)作为应用的唯一标识（<code>applicationId</code>）。可以说在Eclipse下<code>applicationId</code>=<code>package name</code>。所以Eclipse构建的Android项目包名必须唯一，一个包名代表一个应用，不允许两个应用使用同样的包名。包名主要用于系统识别应用，几乎不会被最终用户看到。</p>
<h1 id="androidStudo版本"><a href="#androidStudo版本" class="headerlink" title="androidStudo版本"></a>androidStudo版本</h1><p>在用Android studio构建的Android项目中可以为应用配置<code>applicationId</code>·，配置的<code>applicationId</code>可以不和<code>package name</code>一样。由此可以看来用Android studio构建的Android项目<code>package name</code>不一定是应用程序的标识。这一点很重要，开发者一定要记住。比如你在使用第三方SDK开发时，如百度地图，需要你来设置Android SDK安全码，在设置安全码时需要用到应用程序的包名，这个包名指的是<code>applicationId</code>。</p>
<p><strong>注意</strong>：识别.R跟Activity文件的路径还是packageName,这个是唯一的</p>
<h2 id="解耦方案"><a href="#解耦方案" class="headerlink" title="解耦方案"></a>解耦方案</h2><ul>
<li><code>application id</code> 对应 apk 中 manifest 定义的应用包名，同时用于设备以及 Google Play 的应用唯一标识。</li>
<li><code>package</code> 用于在源码中引用 R 类以及解析注册相关的 activity/service，对应 Java 的包名概念。</li>
</ul>
<p>我们在AndroidManifest.xml定义一个包名，这个是唯一的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    package=&quot;com.hammercui.app.react&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>我们在<code>app.gradle</code>文件使用Gradle DSL 方法来为不同的 flavor 和 build type 定义不同的 applicationId：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">android&#123;</span><br><span class="line">···</span><br><span class="line">productFlavors &#123;</span><br><span class="line">        pro &#123;</span><br><span class="line">            applicationId = &quot;com.hammercui.app.pro&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        free &#123;</span><br><span class="line">            applicationId = &quot;com.hammercui.app.free&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line">            applicationIdSuffix &quot;.debug&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a href="https://chaosleong.gitbooks.io/gradle-for-android/content/appendix/applicationid_versus_packagename.html" target="_blank" rel="external">Gradle Android Plugin中文手册</a></p>
<p><a href="http://siroccoicode.club/?p=574" target="_blank" rel="external">applicationID和packageName的区别</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/react-native基础：热更新/" itemprop="url">
                  react-native基础：热更新
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-21T18:17:42+08:00" content="2016-03-21">
              2016-03-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react-native-basis/" itemprop="url" rel="index">
                    <span itemprop="name">react-native basis</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/react-native基础：热更新/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/react-native基础：热更新/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="已知的热更新方案"><a href="#已知的热更新方案" class="headerlink" title="已知的热更新方案"></a>已知的热更新方案</h1><ul>
<li><p><a href="https://github.com/Microsoft/react-native-code-push" target="_blank" rel="external">CodePush</a> ,我在使用的方案，同时支持android跟ios，可以点击查看我的详细教程<a href="http://hammercui.github.io/post/react-native-android%E5%AE%9E%E6%88%98%EF%BC%9A4-CodePush/">react-native-android实战：4 CodePush使用</a></p>
</li>
<li><p><a href="http://blog.csdn.net/kid1986513/article/details/50337083" target="_blank" rel="external">React Native for Android 热部署图片自定义方案</a></p>
</li>
<li><p><a href="React-Native Android 热更新">React-Native Android 热更新</a>,这个方案对反射的方案做了补充</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/购物清单/" itemprop="url">
                  购物清单
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-20T21:09:51+08:00" content="2016-03-20">
              2016-03-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/生活常识/" itemprop="url" rel="index">
                    <span itemprop="name">生活常识</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/购物清单/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/购物清单/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="家用电器"><a href="#家用电器" class="headerlink" title="家用电器"></a>家用电器</h1><h2 id="洗衣机"><a href="#洗衣机" class="headerlink" title="洗衣机"></a>洗衣机</h2><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>价格</th>
<th>个人评价</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://product.suning.com/0000000000/128927868.html" target="_blank" rel="external">海尔滚筒洗衣机XQG80-BX12636</a></td>
<td>滚筒</td>
<td>2899</td>
<td>担心小孩，次要考虑</td>
</tr>
<tr>
<td><a href="http://product.suning.com/0000000000/126705291.html" target="_blank" rel="external">海尔洗衣机XQS70-Z1626</a></td>
<td>波轮</td>
<td>2599</td>
<td>这个不错，防缠绕</td>
</tr>
</tbody>
</table>
<h2 id="冰箱"><a href="#冰箱" class="headerlink" title="冰箱"></a>冰箱</h2><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>价格</th>
<th>个人评价</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://product.suning.com/0000000000/127894615.html" target="_blank" rel="external">海尔冰箱BCD-248WDPM</a></td>
<td>双开门</td>
<td>2288</td>
<td>风冷无霜</td>
</tr>
<tr>
<td><a href="http://product.suning.com/0000000000/127356379.html" target="_blank" rel="external">海尔冰箱BCD-251WDBD</a></td>
<td>双开门</td>
<td>2699</td>
<td>风冷无霜</td>
</tr>
<tr>
<td><a href="http://product.suning.com/0000000000/123397587.html" target="_blank" rel="external">美菱冰箱BCD-220L3BX芙蓉红</a></td>
<td>三开门</td>
<td>1699</td>
<td>红色，其他无特点</td>
</tr>
</tbody>
</table>
<h2 id="电视"><a href="#电视" class="headerlink" title="电视"></a>电视</h2><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>价格</th>
<th>个人评价</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://product.suning.com/0000000000/128582435.html" target="_blank" rel="external">三星(SAMSUNG) UA58J50SWAJXXZ</a></td>
<td>58英寸 全高清 LED液晶电视</td>
<td>4599</td>
<td>首选项，放弃4k</td>
</tr>
<tr>
<td><a href="http://product.suning.com/0000000000/126643209.html" target="_blank" rel="external">夏普(SHARP) LCD-55S3A</a></td>
<td>55英寸</td>
<td>4999</td>
<td>4K超高清 智能网络 液晶电视</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/post/react-native-android实战：4-CodePush/" itemprop="url">
                  react-native-android实战：4 CodePush使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-18T10:00:38+08:00" content="2016-03-18">
              2016-03-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/react-native-android实战/" itemprop="url" rel="index">
                    <span itemprop="name">react-native android实战</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/post/react-native-android实战：4-CodePush/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="post/react-native-android实战：4-CodePush/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="CodePush简介"><a href="#CodePush简介" class="headerlink" title="CodePush简介"></a>CodePush简介</h1><p><a href="http://microsoft.github.io/code-push/" target="_blank" rel="external">CodePush</a> 是微软开发的，可以实时更新 React Native 和 Cordova 应用。</p>
<p>CodePush 是提供给 React Native 和 Cordova 开发者直接部署移动应用更新给用户设备的云服务。CodePush 作为一个中央仓库，开发者可以推送更新到 (JS, HTML, CSS and images)，应用可以从客户端 SDKs 里面查询更新。CodePush 可以让应用有更多的可确定性，也可以让你直接接触用户群。在修复一些小问题和添加新特性的时候，不需要经过二进制打包，可以直接推送代码进行实时更新。</p>
<p>CodePush 可以进行实时的推送代码更新：</p>
<ul>
<li>直接对用户部署代码更新</li>
<li>管理 Alpha，Beta 和生产环境应用</li>
<li>支持 Cordova 和 React Native </li>
</ul>
<p><strong>CodePush的react-native版本是<a href="https://github.com/Microsoft/react-native-code-push" target="_blank" rel="external">react-native-code-push</a></strong></p>
<h1 id="JavaScript-API"><a href="#JavaScript-API" class="headerlink" title="JavaScript API"></a>JavaScript API</h1><ul>
<li>checkForUpdate</li>
<li>getCurrentPackage</li>
<li>notifyApplicationReady</li>
<li>restartApp </li>
<li>sync</li>
</ul>
<h2 id="codePush-checkForUpdate"><a href="#codePush-checkForUpdate" class="headerlink" title="codePush.checkForUpdate"></a>codePush.checkForUpdate</h2><p>询问<code>code push</code> 服务器是否app有新的版本</p>
<p><code>codePush.checkForUpdate(deploymentKey: String = null): Promise&lt;RemotePackage&gt;;</code></p>
<p>该方法返回Promise，有如下两种值：</p>
<ol>
<li>null 没有更新</li>
<li>A RemotePackage instance</li>
</ol>
<p>举例用法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">codePush.checkForUpdate()</span><br><span class="line">.then((update) =&gt; &#123;</span><br><span class="line">    if (!update) &#123;</span><br><span class="line">        console.log(&quot;The app is up to date!&quot;); </span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&quot;An update is available! Should we download it?&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="codePush-getCurrentPackage"><a href="#codePush-getCurrentPackage" class="headerlink" title="codePush.getCurrentPackage"></a><code>codePush.getCurrentPackage</code></h2><p>获得当前已安装更新的元数据（比如描述，安装时间，大小）<br>举例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">codePush.getCurrentPackage()</span><br><span class="line">.then((update) =&gt; &#123;</span><br><span class="line">    // If the current app &quot;session&quot; represents the first time</span><br><span class="line">    // this update has run, and it had a description provided</span><br><span class="line">    // with it upon release, let&apos;s show it to the end user</span><br><span class="line">    if (update.isFirstRun &amp;&amp; update.description) &#123;</span><br><span class="line">        // Display a &quot;what&apos;s new?&quot; modal</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="codePush-notifyApplicationReady"><a href="#codePush-notifyApplicationReady" class="headerlink" title="codePush.notifyApplicationReady"></a><code>codePush.notifyApplicationReady</code></h2><p>通知CodePush进程，一个更新安装好了。当你检查并安装更新，（比如没有使用sync方法去handle的时候），这个方法必须被调用。否则CodePush会认为update失败，并rollback当前版本，在app重启时。</p>
<p>当使用<code>sync</code>方法时，不需要调用本方法，因为<code>sync</code>会自动调用，</p>
<h2 id="codePush-restartApp"><a href="#codePush-restartApp" class="headerlink" title="codePush.restartApp"></a><code>codePush.restartApp</code></h2><p>立即重启app.</p>
<p>当以下情况时，这个方式是很有用的。：</p>
<ol>
<li>app 当 调用 <code>sync</code> or <code>LocalPackage.install</code> 方法时，指定的 install mode 是 <code>ON_NEXT_RESTART</code> or <code>ON_NEXT_RESUME</code>时 . 这两种情况都是当app重启或resume时，更新内容才能被看到。</li>
<li>You have an app-specific user event (e.g. the end user navigated back to the app’s home route) that allows you to apply the update in an unobtrusive way, and potentially gets the update in front of the end user sooner then waiting until the next restart or resume.</li>
</ol>
<p>因为强制重启，能马上显示更新内容嘛！</p>
<h2 id="codePush-sync"><a href="#codePush-sync" class="headerlink" title="codePush.sync"></a><code>codePush.sync</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">codePush.sync(options: Object, syncStatusChangeCallback: function(syncStatus: Number), downloadProgressCallback: function(progress: DownloadProgress)): Promise&lt;Number&gt;;</span><br></pre></td></tr></table></figure>
<p>允许检查更新，下载并安装，都在一个方法中。除非你需要自定义UI开表现。我们建议开发者在整合CodePush时，使用这个函数。<br>checkForUpdate方法只能检查更新，接下来怎么做要自己写。而该方法更新，下载，安装都能处理。该方法提供了两种模式</p>
<ul>
<li><code>Silent mode</code>（默认的模式），</li>
</ul>
<p>它会自动下载可用更新，并在下次重启应用时应用它们（比如操作系统或用户杀死进程，或者重新启动设备） 。这样一来，整个更新是“沉默”给最终用户，因为用户看不到任何更新提示。</p>
<ul>
<li><code>Active mode</code></li>
</ul>
<p>当有可用的更新，提示用户是否允许下载，然后立即应用此更新。一旦选择了强制通知用户来手动更新，以后每次更新都会强制通知。个人感觉这种方式最合理</p>
<p><code>sync</code>方法，有以下设置属性</p>
<ul>
<li><code>deploymentKey</code> （String）： 部署key，用来区分不同的app,在<code>Info.plist</code>(Ios)和<code>MianActivity.java</code>(Android)修改，当然你也可以在JavaScript里填写，这样我们能动态的修改key</li>
<li><code>installMode</code> (codePush.InstallMode)： 非强制更新，默认<code>codePush.InstallMode.ON_NEXT_RESTART</code></li>
<li><code>mandatoryInstallMode</code> (codePush.InstallMode):强制更新,默认<code>codePush.InstallMode.IMMEDIATE</code></li>
<li><code>minimumBackgroundDuration</code> (Number):</li>
<li><p><code>updateDialog</code> (UpdateDialogOptions) :可选的，更新的对话框，默认是null,包含以下属性</p>
<ul>
<li><p><code>appendReleaseDescription</code> (Boolean) - 是否显示更新description，默认false</p>
</li>
<li><p><code>descriptionPrefix</code> (String) - 更新说明的前缀。 默认是” Description: “</p>
</li>
<li><p><code>mandatoryContinueButtonLabel</code> (String) - 强制更新的按钮文字. 默认 to “Continue”.</p>
</li>
<li><p><code>mandatoryUpdateMessage</code> (String) - 强制更新时，更新通知. Defaults to “An update is available that must be installed.”.</p>
</li>
<li><p><code>optionalIgnoreButtonLabel</code> (String) - 非强制更新时，取消按钮文字. Defaults to “Ignore”.</p>
</li>
<li><p><code>optionalInstallButtonLabel</code> (String) - 非强制更新时，确认文字. Defaults to “Install”.</p>
</li>
<li><p><code>optionalUpdateMessage</code> (String) - 非强制更新时，更新通知. Defaults to “An update is available. Would you like to install it?”.</p>
</li>
<li><p><code>title</code> (String) - 要显示的更新通知的标题. Defaults to “Update available”.</p>
</li>
</ul>
</li>
</ul>
<p>举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// Prompt the user when an update is available</span><br><span class="line">// and then display a &quot;downloading&quot; modal </span><br><span class="line">codePush.sync(&#123; updateDialog: true &#125;, (status) =&gt; &#123;</span><br><span class="line">    switch (status) &#123;</span><br><span class="line">        case codePush.SyncStatus.DOWNLOADING_PACKAGE:</span><br><span class="line">            // Show &quot;downloading&quot; modal</span><br><span class="line">            break;</span><br><span class="line">        case codePush.SyncStatus.INSTALLING_UPDATE:</span><br><span class="line">            // Hide &quot;downloading&quot; modal</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/crossplatformdemo.js#L68" target="_blank" rel="external">再贴一个官方demo地址</a></p>
<h1 id="实战应用"><a href="#实战应用" class="headerlink" title="实战应用"></a>实战应用</h1><h2 id="Service部署"><a href="#Service部署" class="headerlink" title="Service部署"></a>Service部署</h2><h3 id="安装CodePush-CLI"><a href="#安装CodePush-CLI" class="headerlink" title="安装CodePush CLI"></a>安装CodePush CLI</h3><p><code>npm install -g code-push-cli</code></p>
<p>可以输入<code>code-push -v</code>查看版本号</p>
<h3 id="创建CodePush-账号"><a href="#创建CodePush-账号" class="headerlink" title="创建CodePush 账号"></a>创建CodePush 账号</h3><p>在发布一个更新前，必须有账号。</p>
<ul>
<li>终端输入<code>code-push register</code>,执行后弹出<a href="https://codepush-management.azurewebsites.net/auth/register?hostname=DESKTOP-3PVIHT6，" target="_blank" rel="external">https://codepush-management.azurewebsites.net/auth/register?hostname=DESKTOP-3PVIHT6，</a></li>
<li>选择输入微软账号或者github账号，选择Authorize application。然后注册成功，获得一个token。</li>
<li>token输入到控制台，显示<br><img src="http://7xrf0l.com1.z0.glb.clouddn.com/16-3-18/11301899.jpg" alt=""></li>
<li>登录 <code>code-push login</code></li>
<li>注销 <code>code-push loout</code></li>
<li>列出登录的token<code>code-push access-key ls</code></li>
<li>删除某个access-key <code>code-push access-key rm &lt;accessKey&gt;</code></li>
</ul>
<h3 id="注册一个app"><a href="#注册一个app" class="headerlink" title="注册一个app"></a>注册一个app</h3><p>常用命令,只有下面几个：</p>
<ul>
<li><code>access-key</code>    View and delete active user sessions</li>
<li><code>app</code>         View and manage your CodePush-enabled apps</li>
<li><code>collaborator</code>   View and manage collaborators for a given app</li>
<li><code>deployment</code>     View and manage the deployments for your apps</li>
<li><code>login</code>         Authenticate with the CodePush server in order to begin managing your apps</li>
<li><code>logout</code>       Log out of the current session</li>
<li><code>promote</code>      Promote the package from one deployment of your app to another</li>
<li><code>register</code>       Register a new account with the CodePush server</li>
<li><code>release</code>       Release a new version of your app to a specific deployment</li>
<li><code>release-react</code> Release a new version of your React Native app to a specific deployment</li>
<li><code>rollback</code>       Performs a rollback on the latest package of a specific deployment</li>
</ul>
<p>选项：</p>
<ul>
<li>-v, –version  显示版本号  [boolean]</li>
</ul>
<p>比如</p>
<ul>
<li>查看当前部署的app: <code>code-push app ls</code></li>
<li>添加一个app:  <code>code-push app add Zlot_react</code></li>
</ul>
<h3 id="部署已经注册的app"><a href="#部署已经注册的app" class="headerlink" title="部署已经注册的app"></a>部署已经注册的app</h3><ul>
<li>部署: <code>code-push deployment add app名字 部署名</code></li>
<li>重命名部署名： <code>code-push deployment rename app名字 旧部署名 新部署名</code></li>
<li>删除部署名字:  <code>code-push deployment rm app名字 部署名字</code></li>
<li>列表部署名字: <code>code-push deployment ls app名字</code></li>
<li>查看部署的key: <code>code-push deployment ls app名 -k</code></li>
<li>查看release 的历史版本<br><code>code-push deployment history appName deploymentName</code></li>
</ul>
<p><strong>注意：默认的部署名是staging，所以staging的key值就是我们的deployment key</strong></p>
<h2 id="react-native-code-push插件安装"><a href="#react-native-code-push插件安装" class="headerlink" title="react-native-code-push插件安装"></a>react-native-code-push插件安装</h2><p>需要有git环境，并在app工程目录控制台输入</p>
<p><code>npm install react-native-code-push --save</code></p>
<p>安装成功在package.json会看到</p>
<p><code>&quot;react-native-code-push&quot;: &quot;^1.8.0-beta&quot;,</code></p>
<h2 id="android配置"><a href="#android配置" class="headerlink" title="android配置"></a>android配置</h2><ul>
<li>编辑android/setting.gradle文件，添加</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include &apos;:app&apos;, &apos;:react-native-code-push&apos;</span><br><span class="line">project(&apos;:react-native-code-push&apos;).projectDir = new File(rootProject.projectDir, &apos;../node_modules/react-native-code-push/android/app&apos;)</span><br></pre></td></tr></table></figure>
<ul>
<li>编辑android/app/builde.gradle文件，添加依赖<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile project(&apos;:react-native-code-push&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>android react-native v0.18.0+</strong></p>
<blockquote>
<p>此种配置方法仅仅适用react-native 0.18版本及其以上。而且是android studio环境</p>
</blockquote>
<ul>
<li>修改<code>MainActivity.java</code>文件,添加CodePush包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// 1. Import the plugin class</span><br><span class="line">import com.microsoft.codepush.react.CodePush;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class MainActivity extends ReactActivity &#123;</span><br><span class="line">    // 2. Define a private field to hold the CodePush runtime instance</span><br><span class="line">    private CodePush _codePush;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    // 3. Override the getJSBundleFile method in order to let</span><br><span class="line">    // the CodePush runtime determine where to get the JS</span><br><span class="line">    // bundle location from on each app start</span><br><span class="line">    @Override</span><br><span class="line">    protected String getJSBundleFile() &#123;</span><br><span class="line">        return this._codePush.getBundleUrl(&quot;index.android.bundle&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected List&lt;ReactPackage&gt; getPackages() &#123;</span><br><span class="line">        // 4. Instantiate an instance of the CodePush runtime, using the right deployment key. If you don&apos;t</span><br><span class="line">        // already have it, you can run &quot;code-push deployment ls &lt;appName&gt; -k&quot; to retrieve your key.</span><br><span class="line">        this._codePush = new CodePush(&quot;0dsIDongIcoH0mqAmoR0CYb5FhBZNy1w4Bf-l&quot;, this, BuildConfig.DEBUG);</span><br><span class="line"></span><br><span class="line">        // 5. Add the CodePush package to the list of existing packages</span><br><span class="line">        return Arrays.&lt;ReactPackage&gt;asList(</span><br><span class="line">            new MainReactPackage(), this._codePush.getReactPackage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>确定在<code>android/app/build.gradle</code>文件有<code>android.defaultConfig.versionName</code>属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        ...</span><br><span class="line">        versionName &quot;1.0.0&quot;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="JavaScript代码"><a href="#JavaScript代码" class="headerlink" title="JavaScript代码"></a>JavaScript代码</h2><ul>
<li>导入CodePush的JavaScript组件</li>
</ul>
<p><code>import codePush from &quot;react-native-code-push&quot;;</code></p>
<ul>
<li>在在每个app启动时，在生命周期的<code>componentDidMount</code>阶段调用<code>sync</code>,来开启一个后台的更新。</li>
</ul>
<p><code>codePush.sync();</code></p>
<h3 id="设计方案"><a href="#设计方案" class="headerlink" title="设计方案"></a>设计方案</h3><ul>
<li><code>isMandatory === true</code>强制更新，采用弹出model框提醒的方式</li>
</ul>
<ul>
<li><code>isMandatory === false</code>非强制更新，采用静默安装的方式</li>
</ul>
<p>如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount() &#123;</span><br><span class="line">    codePush.sync(&#123;</span><br><span class="line">      updateDialog: false,</span><br><span class="line">      installMode: codePush.InstallMode.ON_NEXT_RESUME,</span><br><span class="line">      deploymentKey: CODE_PUSH_PRODUCTION_KEY,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p>
<h2 id="app如何更新（JavaScript-image）"><a href="#app如何更新（JavaScript-image）" class="headerlink" title="app如何更新（JavaScript+image）"></a>app如何更新（JavaScript+image）</h2><blockquote>
<p>注意：从react-native v0.19.0开始支持android更新assets资源，并且需要CodePush v1.7.0。所以你需要升级你的react-native跟CodePush。</p>
</blockquote>
<p>确保在工程目录,新建release文件夹,如下</p>
<h3 id="package命令"><a href="#package命令" class="headerlink" title="package命令"></a>package命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">react-native bundle </span><br><span class="line">--platform ios 选择平台</span><br><span class="line">--entry-file index.ios.js  选择启动项</span><br><span class="line">--bundle-output ./release/main.jsbundle  选择打包js输出文件</span><br><span class="line">--assets-dest ./release \  选择资源输出目录</span><br><span class="line">--dev false  是否调试</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Android版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react-native bundle --platform android --entry-file index.android.js --bundle-output ./release/main.jsbundle  --assets-dest ./release --dev false</span><br></pre></td></tr></table></figure>
</li>
<li><p>ios版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react-native bundle --platform ios --entry-file index.ios.js --bundle-output ./release/main.jsbundle  --assets-dest ./release --dev false</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="release命令"><a href="#release命令" class="headerlink" title="release命令"></a>release命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">code-push release &lt;appName&gt; &lt;updateContents&gt; &lt;targetBinaryVersion&gt;</span><br><span class="line">[--deploymentName &lt;deploymentName&gt;]</span><br><span class="line">[--description &lt;description&gt;]</span><br><span class="line">[--mandatory]</span><br></pre></td></tr></table></figure>
<p>mandatory ：是否强制更新。</p>
<p><strong>注意：targetBinaryVersion指的是当前的app版本，比如客户端是1.0.0，如果我们要更新客户端，targetBinaryVersion也要是1.0.0，表示是1.0.0版本的更新，跟native的更新不太一样。这是我们第一次经常犯的错误大家不要搞混了。</strong></p>
<ul>
<li>Android版本<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code-push release Zlot ./release 1.0.0 --description &quot;这是一个1.0.0版本的更新&quot; --mandatory true</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="1-更新不成功，报but-it-is-being-ignored-due-to-having-been-previously-rolled-back"><a href="#1-更新不成功，报but-it-is-being-ignored-due-to-having-been-previously-rolled-back" class="headerlink" title="1 更新不成功，报but it is being ignored due to having been previously rolled back."></a>1 更新不成功，报<code>but it is being ignored due to having been previously rolled back.</code></h2><p>问题原因：客户端版本1.0.0，然后release的版本是1.0.1，所以检测的时候发现不了1.0.0版本的更新。</p>
<p>因此我们也建议，js的更新采用静默更新，native的更新，做出提示。</p>
<p><strong>注意：targetBinaryVersion指的是当前的app版本，比如客户端是1.0.0，如果我们要更新客户端，targetBinaryVersion也要是1.0.0，表示是1.0.0版本的更新，跟native的更新不太一样。这是我们第一次经常犯的错误大家不要搞混了。</strong></p>
<h2 id="2-CodePush-An-update-is-available-but-it-is-being-ignored-due-to-having-been-previously-rolled-back"><a href="#2-CodePush-An-update-is-available-but-it-is-being-ignored-due-to-having-been-previously-rolled-back" class="headerlink" title="2 [CodePush] An update is available, but it is being ignored due to having been previously rolled back."></a>2 <code>[CodePush] An update is available, but it is being ignored due to having been previously rolled back.</code></h2><p>解决方案：一般这种情况是在，我们自定义model，展示更新过程，并监听了安装完成，比如这个<a href="https://github.com/Microsoft/react-native-code-push/blob/master/Examples/CodePushDemoApp/crossplatformdemo.js" target="_blank" rel="external">demo</a>,我这这里忘了在<code>componentDidMount()</code>方法里添加<code>CodePush.notifyApplicationReady();</code>，就一直报这个错误。添加上就ok了</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="http://blog.csdn.net/oiken/article/details/50279871" target="_blank" rel="external">使用CodePush热更新ReactNative JS代码</a></p>
<p><a href="https://github.com/Microsoft/react-native-code-push#releasing-updates-javascript--images" target="_blank" rel="external">react-native-code-push官方文档</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://avatar.coolapk.com/data/000/65/51/50_avatar_middle.jpg"
               alt="hammercui" />
          <p class="site-author-name" itemprop="name">hammercui</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">64</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/hammercui" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://xiekw2010.github.io" title="xiekw2010's Blog" target="_blank">xiekw2010's Blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.lcode.org/" title="江清清的技术专栏" target="_blank">江清清的技术专栏</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hammercui</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"hammercui"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

</body>
</html>
